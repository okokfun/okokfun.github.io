<p>æ­£åˆ™è¡¨è¾¾å¼æ˜¯C++11æ—¶åŠ å…¥æ ‡å‡†åº“ğŸ‘‰<a href="https://zh.cppreference.com/w/cpp/regex">æ­£åˆ™è¡¨è¾¾å¼</a></p>
<h1>åŒ¹é…è§„åˆ™ï¼š</h1>
<table>
<thead>
<tr>
<th>å­—ç¬¦åŒ¹é…è§„åˆ™</th>
<th>é‡Šä¹‰</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>\w</code></td>
<td>åŒ¹é…ä»»ä½•å­—æ¯å­—ç¬¦</td>
</tr>
<tr>
<td><code>\W</code></td>
<td>åŒ¹é…ä»»ä½•éå­—æ¯å­—ç¬¦</td>
</tr>
<tr>
<td><code>\d</code></td>
<td>åŒ¹é…ä»»ä½•æ•°å­—å­—ç¬¦</td>
</tr>
<tr>
<td><code>\D</code></td>
<td>åŒ¹é…ä»»ä½•éæ•°å­—ï¼Œ</td>
</tr>
<tr>
<td><code>\s</code></td>
<td>åŒ¹é…ä»»ä½•ç©ºæ ¼</td>
</tr>
<tr>
<td><code>\S</code></td>
<td>åŒ¹é…ä»»ä½•éç©ºç™½ï¼Œ</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>æ­£åˆ™è¡¨è¾¾å¼é‡è¯</th>
<th>æŒ‡å®šæ•°é‡</th>
</tr>
</thead>
<tbody>
<tr>
<td>*</td>
<td>0 æˆ–æ›´å¤š</td>
</tr>
<tr>
<td>+</td>
<td>1 æˆ–æ›´å¤š</td>
</tr>
<tr>
<td>ï¼Ÿ</td>
<td>0 æˆ– 1</td>
</tr>
<tr>
<td>{n}</td>
<td>æ­£å¥½æ˜¯n</td>
</tr>
<tr>
<td>{n, m}</td>
<td>ä»‹äºnå’Œmä¹‹é—´ï¼ˆå«ï¼‰</td>
</tr>
<tr>
<td>{n,}</td>
<td>è‡³å°‘n</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>å­—ç¬¦</th>
<th>æŒ‡å®š</th>
</tr>
</thead>
<tbody>
<tr>
<td>X|Y</td>
<td>å­—ç¬¦Xæˆ–Y</td>
</tr>
<tr>
<td>\Y</td>
<td>ç‰¹æ®Šå­—ç¬¦Yä½œä¸ºæ–‡å­—ï¼ˆæ¢å¥è¯è¯´ï¼Œè½¬ä¹‰ï¼‰</td>
</tr>
<tr>
<td>\n</td>
<td>æ–°ä¸€è¡Œ</td>
</tr>
<tr>
<td>\r</td>
<td>å›è½¦</td>
</tr>
<tr>
<td>\t</td>
<td>Tab</td>
</tr>
<tr>
<td>\0</td>
<td>Null</td>
</tr>
<tr>
<td>\xYY</td>
<td>YYå¯¹åº”çš„åå…­è¿›åˆ¶å­—ç¬¦</td>
</tr>
</tbody>
</table>
<h1>ä¾‹å­</h1>
<p>åè½¬è‡ªå®šä¹‰å­—ç¬¦ï¼šä¾‹å¦‚ï¼Œå­—ç¬¦ç±»<code>[^aeiou]</code>åŒ…æ‹¬æ‰€æœ‰éå…ƒéŸ³å­—ç¬¦ã€‚
<code>c\w{n, m}t</code>:åŒ¹é…ä»¥<code>c</code>å¼€å¤´ï¼Œä»¥<code>t</code>ç»“å°¾ï¼Œä¸­é—´åŒ¹é…<code>n ~ m</code>æ•°é‡çš„å­—æ¯å­—ç¬¦ï¼›
ä¹Ÿå¯ä»¥æ”¹ä¸º<code>c\w*t</code>ä¸ºåŒ¹é…ä»¥<code>c</code>å¼€å¤´ï¼Œä»¥<code>t</code>ç»“å°¾ï¼Œä¸­é—´åŒ¹é…ä»»æ„æ•°é‡çš„å­—æ¯å­—ç¬¦ï¼›
ä¾‹å­ï¼š
<code>\w{n}</code>:åŒ¹é…nä¸ªå­—æ¯å­—ç¬¦</p>
<h1>æ¨¡æ¿å‡½æ•°</h1>
<h2>regex_match</h2>
<p><code>regex_match</code>å°è¯•åŒ¹é…ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼åˆ°æ•´ä¸ªå­—ç¬¦åºåˆ—
åŒ¹é…çš„å‡½æ•°æ¨¡ç‰ˆæœ‰7ä¸ªï¼Œæµ“ç¼©ä¸‹æ¥æœ‰ä¸¤ä¸ª</p>
<pre class="hljs language-cpp"><code><span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">regex_match</span><span class="hljs-params">(first, last, [results], regex, [flags])</span></span>;

<span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">regex_match</span><span class="hljs-params">(str, [results], regex, [flags])</span></span>;
</code></pre>
<p>å‚æ•°ï¼š
<code>first</code>, <code>last</code>: åº”ç”¨ regex åˆ°çš„ç›®æ ‡å­—ç¬¦èŒƒå›´ï¼Œä»¥è¿­ä»£å™¨ç»™å®š
<code>results</code>: åŒ¹é…å‡ºæ¥çš„ç»“æœ
<code>str</code>: ç›®æ ‡å­—ç¬¦ä¸²ï¼Œä»¥ç©ºç»ˆæ­¢ C é£æ ¼å­—ç¬¦ä¸²ç»™å‡º
<code>s</code>: ç›®æ ‡å­—ç¬¦ä¸²ï¼Œä»¥ std::basic_string ç»™å‡º
<code>results</code>: æ­£åˆ™è¡¨è¾¾å¼
ä¾‹å­ï¼š</p>
<pre class="hljs language-cpp"><code><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;string&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;regex&gt;</span></span>
 
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-comment">// ç®€å•æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…</span>
    std::string fnames[] = {<span class="hljs-string">&quot;foo.txt&quot;</span>, <span class="hljs-string">&quot;bar.txt&quot;</span>, <span class="hljs-string">&quot;baz.dat&quot;</span>, <span class="hljs-string">&quot;zoidberg&quot;</span>};
    <span class="hljs-function">std::regex <span class="hljs-title">txt_regex</span><span class="hljs-params">(<span class="hljs-string">&quot;[a-z]+\\.txt&quot;</span>)</span></span>;
 
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> <span class="hljs-keyword">auto</span> &amp;fname : fnames) {
        std::cout &lt;&lt; fname &lt;&lt; <span class="hljs-string">&quot;: &quot;</span> &lt;&lt; std::<span class="hljs-built_in">regex_match</span>(fname, txt_regex) &lt;&lt; <span class="hljs-string">&#x27;\n&#x27;</span>;
    }   
 
    <span class="hljs-comment">// æå–å­åŒ¹é…</span>
    <span class="hljs-function">std::regex <span class="hljs-title">base_regex</span><span class="hljs-params">(<span class="hljs-string">&quot;([a-z]+)\\.txt&quot;</span>)</span></span>;
    std::smatch match_results;
 
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> <span class="hljs-keyword">auto</span> &amp;fname : fnames) {
        <span class="hljs-keyword">if</span> (std::<span class="hljs-built_in">regex_match</span>(fname, match_results, base_regex)) {
            <span class="hljs-comment">// é¦–ä¸ª sub_match æ˜¯æ•´ä¸ªå­—ç¬¦ä¸²ï¼›ä¸‹ä¸ª</span>
            <span class="hljs-comment">// sub_match æ˜¯é¦–ä¸ªæœ‰æ‹¬å·è¡¨è¾¾å¼ã€‚</span>
            <span class="hljs-keyword">if</span> (match_results.<span class="hljs-built_in">size</span>() == <span class="hljs-number">2</span>) {
                std::ssub_match base_sub_match = match_results[<span class="hljs-number">1</span>];
                std::string base = base_sub_match.<span class="hljs-built_in">str</span>();
                std::cout &lt;&lt; fname &lt;&lt; <span class="hljs-string">&quot; has a base of &quot;</span> &lt;&lt; base &lt;&lt; <span class="hljs-string">&#x27;\n&#x27;</span>;
            }
        }
    }
 
    <span class="hljs-comment">// æå–å‡ ä¸ªå­åŒ¹é…</span>
    <span class="hljs-function">std::regex <span class="hljs-title">pieces_regex</span><span class="hljs-params">(<span class="hljs-string">&quot;([a-z]+)\\.([a-z]+)&quot;</span>)</span></span>;
    std::smatch pieces_match_results;
 
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> <span class="hljs-keyword">auto</span> &amp;fname : fnames) {
        <span class="hljs-keyword">if</span> (std::<span class="hljs-built_in">regex_match</span>(fname, pieces_match_results, pieces_regex)) {
            std::cout &lt;&lt; fname &lt;&lt; <span class="hljs-string">&#x27;\n&#x27;</span>;
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">size_t</span> i = <span class="hljs-number">0</span>; i &lt; pieces_match_results.<span class="hljs-built_in">size</span>(); ++i) {
                std::ssub_match sub_match = pieces_match_results[i];
                std::string piece = sub_match.<span class="hljs-built_in">str</span>();
                std::cout &lt;&lt; <span class="hljs-string">&quot;    submatch &quot;</span> &lt;&lt; i &lt;&lt; <span class="hljs-string">&quot;: &quot;</span> &lt;&lt; piece &lt;&lt; <span class="hljs-string">&#x27;\n&#x27;</span>;
            }   
        }   
    }   
}
</code></pre>
<p>ç»“æœï¼š</p>
<pre class="hljs"><code>foo.txt: 1
bar.txt: 1
baz.dat: 0
zoidberg: 0
foo.txt has a base of foo
bar.txt has a base of bar
foo.txt
    submatch 0: foo.txt
    submatch 1: foo
    submatch 2: txt
bar.txt
    submatch 0: bar.txt
    submatch 1: bar
    submatch 2: txt
baz.dat
    submatch 0: baz.dat
    submatch 1: baz
    submatch 2: dat
</code></pre>
<h2>regex_search</h2>
<p>å°è¯•åŒ¹é…ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼åˆ°å­—ç¬¦åºåˆ—çš„ä»»ä½•éƒ¨åˆ†
åŒ¹é…çš„å‡½æ•°æ¨¡ç‰ˆæœ‰7ä¸ªï¼Œæµ“ç¼©ä¸‹æ¥æœ‰ä¸¤ä¸ª</p>
<pre class="hljs language-cpp"><code><span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">regex_search</span><span class="hljs-params">(first, last, [results], regex, [flags])</span></span>;

<span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">regex_search</span><span class="hljs-params">(str, [results], regex, [flags])</span></span>;
</code></pre>
<p><code>first</code>, <code>last</code>: æ ‡è¯†ç›®æ ‡å­—ç¬¦åºåˆ—çš„èŒƒå›´
<code>str</code>: æŒ‡å‘ç©ºç»ˆæ­¢å­—ç¬¦åºåˆ—çš„æŒ‡é’ˆ
<code>regex</code>: åº”å½“åº”ç”¨åˆ°ç›®æ ‡å­—ç¬¦åºåˆ—çš„ std::regex
<code>results</code>: åŒ¹é…ç»“æœ
<code>flags</code>: æŒç®¡æœç´¢è¡Œä¸ºçš„ std::regex_constants::match_flag_type</p>
<p>ä¾‹å­ï¼š</p>
<pre class="hljs language-cpp"><code><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;string&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;regex&gt;</span></span>
 
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    std::string lines[] = {<span class="hljs-string">&quot;Roses are #ff0000&quot;</span>,
                           <span class="hljs-string">&quot;violets are #0000ff&quot;</span>,
                           <span class="hljs-string">&quot;all of my base are belong to you&quot;</span>};
 
    <span class="hljs-function">std::regex <span class="hljs-title">color_regex</span><span class="hljs-params">(<span class="hljs-string">&quot;#([a-f0-9]{2})&quot;</span>
                            <span class="hljs-string">&quot;([a-f0-9]{2})&quot;</span>
                            <span class="hljs-string">&quot;([a-f0-9]{2})&quot;</span>)</span></span>;
 
    <span class="hljs-comment">// ç®€å•åŒ¹é…</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> <span class="hljs-keyword">auto</span> &amp;line : lines) {
        std::cout &lt;&lt; line &lt;&lt; <span class="hljs-string">&quot;: &quot;</span> &lt;&lt; std::boolalpha
                  &lt;&lt; std::<span class="hljs-built_in">regex_search</span>(line, color_regex) &lt;&lt; <span class="hljs-string">&#x27;\n&#x27;</span>;
    }   
    std::cout &lt;&lt; <span class="hljs-string">&#x27;\n&#x27;</span>;
 
    <span class="hljs-comment">// å±•ç¤ºæ¯ä¸ªåŒ¹é…ä¸­æœ‰æ ‡è®°å­è¡¨è¾¾å¼çš„å†…å®¹</span>
    std::smatch color_match;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> <span class="hljs-keyword">auto</span>&amp; line : lines) {
        <span class="hljs-keyword">if</span>(std::<span class="hljs-built_in">regex_search</span>(line, color_match, color_regex)) {
            std::cout &lt;&lt; <span class="hljs-string">&quot;matches for &#x27;&quot;</span> &lt;&lt; line &lt;&lt; <span class="hljs-string">&quot;&#x27;\n&quot;</span>;
            std::cout &lt;&lt; <span class="hljs-string">&quot;Prefix: &#x27;&quot;</span> &lt;&lt; color_match.<span class="hljs-built_in">prefix</span>() &lt;&lt; <span class="hljs-string">&quot;&#x27;\n&quot;</span>;
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">size_t</span> i = <span class="hljs-number">0</span>; i &lt; color_match.<span class="hljs-built_in">size</span>(); ++i) 
                std::cout &lt;&lt; i &lt;&lt; <span class="hljs-string">&quot;: &quot;</span> &lt;&lt; color_match[i] &lt;&lt; <span class="hljs-string">&#x27;\n&#x27;</span>;
            std::cout &lt;&lt; <span class="hljs-string">&quot;Suffix: &#x27;&quot;</span> &lt;&lt; color_match.<span class="hljs-built_in">suffix</span>() &lt;&lt; <span class="hljs-string">&quot;\&#x27;\n\n&quot;</span>;
        }
    }
 
    <span class="hljs-comment">// é‡å¤æœç´¢ï¼ˆå‚é˜… std::regex_iterator ï¼‰</span>
    <span class="hljs-function">std::string <span class="hljs-title">log</span><span class="hljs-params">(<span class="hljs-string">R&quot;(
        Speed:	366
        Mass:	35
        Speed:	378
        Mass:	32
        Speed:	400
	Mass:	30)&quot;</span>)</span></span>;
    <span class="hljs-function">std::regex <span class="hljs-title">r</span><span class="hljs-params">(<span class="hljs-string">R&quot;(Speed:\t\d*)&quot;</span>)</span></span>;
    std::smatch sm;
    <span class="hljs-keyword">while</span>(<span class="hljs-built_in">regex_search</span>(log, sm, r)) {
        std::cout &lt;&lt; sm.<span class="hljs-built_in">str</span>() &lt;&lt; <span class="hljs-string">&#x27;\n&#x27;</span>;
        log = sm.<span class="hljs-built_in">suffix</span>();
    }
 
    <span class="hljs-comment">// C é£æ ¼å­—ç¬¦ä¸²æ¼”ç¤º</span>
    std::cmatch cm;
    <span class="hljs-keyword">if</span>(std::<span class="hljs-built_in">regex_search</span>(<span class="hljs-string">&quot;this is a test&quot;</span>, cm, std::<span class="hljs-built_in">regex</span>(<span class="hljs-string">&quot;test&quot;</span>))) 
        std::cout &lt;&lt; <span class="hljs-string">&quot;\nFound &quot;</span> &lt;&lt; cm[<span class="hljs-number">0</span>] &lt;&lt; <span class="hljs-string">&quot; at position &quot;</span> &lt;&lt; cm.<span class="hljs-built_in">prefix</span>().<span class="hljs-built_in">length</span>();
}
</code></pre>
<p>ç»“æœï¼š</p>
<pre class="hljs"><code>Roses are #ff0000: true
violets are #0000ff: true
all of my base are belong to you: false
 
matches for 'Roses are #ff0000'
Prefix: 'Roses are '
0: #ff0000
1: ff
2: 00
3: 00
Suffix: ''
 
matches for 'violets are #0000ff'
Prefix: 'violets are '
0: #0000ff
1: 00
2: 00
3: ff
Suffix: ''
 
Speed:	366
Speed:	378
Speed:	400
 
Found test at position 10
</code></pre>
<h2>regex_replace</h2>
<p>ä»¥æ ¼å¼åŒ–çš„æ›¿æ¢æ–‡æœ¬æ¥æ›¿æ¢æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…çš„å‡ºç°ä½ç½®
åŒ¹é…çš„å‡½æ•°æ¨¡ç‰ˆæœ‰6ä¸ªï¼Œæµ“ç¼©ä¸‹æ¥æœ‰ä¸¤ä¸ª</p>
<pre class="hljs language-cpp"><code><span class="hljs-comment">// è¿”å›è¾“å‡ºè¿­ä»£å™¨ out åœ¨æ‰€æœ‰æ’å…¥åçš„å‰¯æœ¬</span>
<span class="hljs-function">OutputIt <span class="hljs-title">regex_replace</span><span class="hljs-params">(out, first, last, basic_regex_re, basic_string_fmt, [flags])</span></span>; 

<span class="hljs-comment">// è¿”å›å«æœ‰è¾“å‡ºçš„å­—ç¬¦ä¸² result </span>
<span class="hljs-function">std::basic_string&lt;CharT,STraits,SAlloc&gt;
    <span class="hljs-title">regex_replace</span><span class="hljs-params">(basic_string_s, basic_regex_re, basic_string_fmt, [flags])</span></span>;
</code></pre>
<p>å‚æ•°ï¼š
<code>first</code>, <code>last</code>: ä»¥ä¸€å¯¹è¿­ä»£å™¨è¡¨ç¤ºçš„è¾“å…¥å­—ç¬¦åºåˆ—
<code>basic_string_s</code>: ä»¥ std::basic_string æˆ–å­—ç¬¦æ•°ç»„è¡¨ç¤ºçš„è¾“å…¥å­—ç¬¦åºåˆ—
<code>basic_regex_re</code>: å°†ä¸è¾“å…¥åºåˆ—åŒ¹é…çš„ std::basic_regex
<code>flags</code>: std::regex_constants::match_flag_type ç±»å‹çš„åŒ¹é…æ ‡å¿—
<code>basic_string_fmt</code>: æ­£åˆ™è¡¨è¾¾å¼æ›¿æ¢æ ¼å¼å­—ç¬¦ä¸²ï¼Œå‡†ç¡®è¯­æ³•ä¾èµ–äº flags çš„å€¼
<code>out</code>: å­˜å‚¨æ›¿æ¢ç»“æœçš„è¾“å‡ºè¿­ä»£å™¨</p>
<p>ä¾‹å­ï¼š</p>
<pre class="hljs language-cpp"><code><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iterator&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;regex&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;string&gt;</span></span>
 
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
   std::string text = <span class="hljs-string">&quot;Quick brown fox&quot;</span>;
   <span class="hljs-function">std::regex <span class="hljs-title">vowel_re</span><span class="hljs-params">(<span class="hljs-string">&quot;a|e|i|o|u&quot;</span>)</span></span>;
 
   <span class="hljs-comment">// å†™ç»“æœåˆ°è¾“å‡ºè¿­ä»£å™¨</span>
   std::<span class="hljs-built_in">regex_replace</span>(std::ostreambuf_iterator&lt;<span class="hljs-keyword">char</span>&gt;(std::cout),
                      text.<span class="hljs-built_in">begin</span>(), text.<span class="hljs-built_in">end</span>(), vowel_re, <span class="hljs-string">&quot;*&quot;</span>);
 
   <span class="hljs-comment">// æ„é€ ä¿æœ‰ç»“æœçš„å­—ç¬¦ä¸²</span>
   std::cout &lt;&lt; <span class="hljs-string">&#x27;\n&#x27;</span> &lt;&lt; std::<span class="hljs-built_in">regex_replace</span>(text, vowel_re, <span class="hljs-string">&quot;[$&amp;]&quot;</span>) &lt;&lt; <span class="hljs-string">&#x27;\n&#x27;</span>;
}
</code></pre>
<p>ç»“æœï¼š</p>
<pre class="hljs"><code>Q**ck br*wn f*x
Q[u][i]ck br[o]wn f[o]x
</code></pre>
