<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>C&#43;&#43;17 on My Blog</title>
    <link>https://okokfun.github.io/tags/c&#43;&#43;17/</link>
    <description>Recent content in C&#43;&#43;17 on My Blog</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh-CN</language>
    <lastBuildDate>Sat, 19 Mar 2022 00:01:15 +0000</lastBuildDate><atom:link href="https://okokfun.github.io/tags/c++17/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>ç¬¬ä¸‰éƒ¨åˆ†-æ–°çš„æ ‡å‡†åº“ç»„ä»¶</title>
      <link>https://okokfun.github.io/post/%E7%AC%AC%E4%B8%89%E9%83%A8%E5%88%86-%E6%96%B0%E7%9A%84%E6%A0%87%E5%87%86%E5%BA%93%E7%BB%84%E4%BB%B6/</link>
      <pubDate>Sat, 19 Mar 2022 00:01:15 +0000</pubDate>
      
      <guid>https://okokfun.github.io/post/%E7%AC%AC%E4%B8%89%E9%83%A8%E5%88%86-%E6%96%B0%E7%9A%84%E6%A0%87%E5%87%86%E5%BA%93%E7%BB%84%E4%BB%B6/</guid>
      <description>ç¬¬ä¸‰éƒ¨åˆ† æ–°çš„æ ‡å‡†åº“ç»„ä»¶ æœ¬éƒ¨åˆ†ä»‹ç»äº† C++17 çš„æ–°åº“ç»„ä»¶ã€‚
15 std::optional&amp;lt;&amp;gt; åœ¨ç¼–ç¨‹ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸é‡åˆ°å¯èƒ½è¿”å›/ä¼ é€’/ä½¿ç”¨æŸç§ç±»å‹çš„å¯¹è±¡çš„æƒ…å†µã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬å¯ä»¥æœ‰ä¸€ä¸ªç‰¹å®šç±»å‹çš„å€¼ï¼Œæˆ–è€…æˆ‘ä»¬å¯èƒ½æ ¹æœ¬æ²¡æœ‰ä»»ä½•å€¼ã€‚å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ç§æ¨¡æ‹Ÿç±»ä¼¼äºæŒ‡é’ˆçš„è¯­ä¹‰çš„æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨ nullptr æ¥è¡¨ç¤ºæ²¡æœ‰å€¼ã€‚å¤„ç†è¿™ä¸ªé—®é¢˜çš„æ–¹æ³•æ˜¯å®šä¹‰ä¸€ä¸ªç‰¹å®šç±»å‹çš„å¯¹è±¡ï¼Œå¸¦æœ‰ä¸€ä¸ªé¢å¤–çš„å¸ƒå°”æˆå‘˜/æ ‡å¿—ï¼Œè¡¨æ˜ä¸€ä¸ªå€¼æ˜¯å¦å­˜åœ¨ã€‚ std::optional&amp;lt;&amp;gt; ä»¥ç±»å‹å®‰å…¨çš„æ–¹å¼æä¾›æ­¤ç±»å¯¹è±¡ã€‚
å¯é€‰å¯¹è±¡ä»…å…·æœ‰åŒ…å«å¯¹è±¡çš„å†…éƒ¨å­˜å‚¨å™¨ä»¥åŠå¸ƒå°”æ ‡å¿—ã€‚å› æ­¤ï¼Œå¤§å°é€šå¸¸æ¯”åŒ…å«çš„å¯¹è±¡å¤§ä¸€ä¸ªå­—èŠ‚ã€‚å¯¹äºæŸäº›åŒ…å«çš„ç±»å‹ï¼Œç”šè‡³å¯èƒ½æ ¹æœ¬æ²¡æœ‰å¤§å°å¼€é”€ï¼Œå‰ææ˜¯å¯ä»¥å°†é™„åŠ ä¿¡æ¯æ”¾ç½®åœ¨åŒ…å«çš„å¯¹è±¡ä¸­ã€‚æ²¡æœ‰åˆ†é…å †å†…å­˜ã€‚å¯¹è±¡ä½¿ç”¨ä¸åŒ…å«ç±»å‹ç›¸åŒçš„å¯¹é½æ–¹å¼ã€‚
ä½†æ˜¯ï¼Œå¯é€‰å¯¹è±¡ä¸ä»…ä»…æ˜¯å°†å¸ƒå°”æ ‡å¿—çš„åŠŸèƒ½æ·»åŠ åˆ°å€¼æˆå‘˜çš„ç»“æ„ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ²¡æœ‰å€¼ï¼Œåˆ™ä¸ä¼šä¸ºåŒ…å«çš„ç±»å‹è°ƒç”¨æ„é€ å‡½æ•°ï¼ˆå› æ­¤ï¼Œæ‚¨å¯ä»¥ä¸ºå¯¹è±¡æä¾›æ²¡æœ‰çš„é»˜è®¤çŠ¶æ€ï¼‰ã€‚
ä¸ std::variant&amp;lt;&amp;gt; å’Œ std::any ä¸€æ ·ï¼Œç»“æœå¯¹è±¡å…·æœ‰å€¼è¯­ä¹‰ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¤åˆ¶è¢«å®ç°ä¸ºæ·±åº¦å¤åˆ¶ï¼Œåˆ›å»ºä¸€ä¸ªç‹¬ç«‹çš„å¯¹è±¡ï¼Œå¸¦æœ‰æ ‡å¿—å’ŒåŒ…å«çš„å€¼ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰åœ¨å®ƒè‡ªå·±çš„å†…å­˜ä¸­ã€‚å¤åˆ¶æ²¡æœ‰åŒ…å«å€¼çš„ std::optional&amp;lt;&amp;gt; å¾ˆä¾¿å®œï¼›å¤åˆ¶å¸¦æœ‰åŒ…å«å€¼çš„ std::optional&amp;lt;&amp;gt; ä¸å¤åˆ¶åŒ…å«çš„ç±»å‹/å€¼ä¸€æ ·ä¾¿å®œ/æ˜‚è´µã€‚æ”¯æŒç§»åŠ¨è¯­ä¹‰ã€‚
15.1 ä½¿ç”¨ std::optional&amp;lt;&amp;gt; std::optional&amp;lt;&amp;gt;æ¨¡å‹æ˜¯ä¸€ä¸ªä»»æ„ç±»å‹çš„å¯å¿½ç•¥çš„å®ä¾‹ã€‚è¿™ä¸ªå®ä¾‹å¯èƒ½æ˜¯ä¸€ä¸ªæˆå‘˜ï¼Œä¸€ä¸ªå‚æ•°ï¼Œæˆ–è€…ä¸€ä¸ªè¿”å›å€¼ã€‚ä½ ä¹Ÿå¯ä»¥è¯´ï¼Œstd::optional&amp;lt;&amp;gt;æ˜¯ä¸€ä¸ªå®¹çº³é›¶æˆ–ä¸€ä¸ªå…ƒç´ çš„å®¹å™¨ã€‚
15.1.1 å¯é€‰çš„è¿”å›å€¼ ä»¥ä¸‹ç¨‹åºæ¼”ç¤ºäº† std::optional&amp;lt;&amp;gt; ç”¨ä½œè¿”å›å€¼çš„èƒ½åŠ›ï¼š lib/optional.cpp
#include &amp;lt;optional&amp;gt; #include &amp;lt;string&amp;gt; #include &amp;lt;iostream&amp;gt; // å¦‚æœå¯èƒ½ï¼Œå°†å­—ç¬¦ä¸²è½¬æ¢ä¸º int: std::optional&amp;lt;int&amp;gt; asInt(const std::string&amp;amp; s) { try { return std::stoi(s); } catch (...) { return std::nullopt; } } int main() { for (auto s : {&amp;#34;42&amp;#34;, &amp;#34; 077&amp;#34;, &amp;#34;hello&amp;#34;, &amp;#34;0x33&amp;#34;} ) { // å¦‚æœå¯èƒ½ï¼Œå°è¯•å°† s è½¬æ¢ä¸º int å¹¶æ‰“å°ç»“æœ: std::optional&amp;lt;int&amp;gt; oi = asInt(s); if (oi) { std::cout &amp;lt;&amp;lt; &amp;#34;convert &amp;#39;&amp;#34; &amp;lt;&amp;lt; s &amp;lt;&amp;lt; &amp;#34;&amp;#39; to int: &amp;#34; &amp;lt;&amp;lt; *oi &amp;lt;&amp;lt; &amp;#34;\n&amp;#34;; } else { std::cout &amp;lt;&amp;lt; &amp;#34;can&amp;#39;t convert &amp;#39;&amp;#34; &amp;lt;&amp;lt; s &amp;lt;&amp;lt; &amp;#34;&amp;#39; to int\n&amp;#34;; } } } åœ¨ç¨‹åºä¸­ asInt() æ˜¯å°†ä¼ é€’çš„å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•´æ•°çš„å‡½æ•°ã€‚ ä½†æ˜¯ï¼Œè¿™å¯èƒ½ä¸ä¼šæˆåŠŸã€‚ å‡ºäºè¿™ä¸ªåŸå› ï¼Œä½¿ç”¨äº† std::optional&amp;lt;&amp;gt; ä»¥ä¾¿æˆ‘ä»¬å¯ä»¥è¿”å›&amp;quot;no int&amp;quot;å¹¶é¿å…ä¸ºå…¶å®šä¹‰ä¸€ä¸ªç‰¹æ®Šçš„ int å€¼æˆ–å‘è°ƒç”¨è€…æŠ›å‡ºå¼‚å¸¸ã€‚ å› æ­¤ï¼Œæˆ‘ä»¬è¦ä¹ˆè¿”å›è°ƒç”¨ stoi() çš„ç»“æœï¼Œå®ƒç”¨ä¸€ä¸ª int åˆå§‹åŒ–è¿”å›å€¼ï¼Œè¦ä¹ˆæˆ‘ä»¬è¿”å› std::nulloptï¼Œè¡¨æ˜æˆ‘ä»¬æ²¡æœ‰ä¸€ä¸ª int å€¼ã€‚ æˆ‘ä»¬å¯ä»¥å®ç°å¦‚ä¸‹ç›¸åŒçš„è¡Œä¸ºï¼š</description>
    </item>
    
    <item>
      <title>ç¬¬äº”éƒ¨åˆ†-ä¸“ä¸šå·¥å…·</title>
      <link>https://okokfun.github.io/post/%E7%AC%AC%E4%BA%94%E9%83%A8%E5%88%86-%E4%B8%93%E4%B8%9A%E5%B7%A5%E5%85%B7-/</link>
      <pubDate>Sat, 19 Mar 2022 00:01:15 +0000</pubDate>
      
      <guid>https://okokfun.github.io/post/%E7%AC%AC%E4%BA%94%E9%83%A8%E5%88%86-%E4%B8%93%E4%B8%9A%E5%B7%A5%E5%85%B7-/</guid>
      <description>ç¬¬äº”éƒ¨åˆ† ä¸“ä¸šå·¥å…· è¿™éƒ¨åˆ†ä»‹ç»äº†æ™®é€šåº”ç”¨ç¨‹åºç¨‹åºå‘˜é€šå¸¸ä¸å¿…çŸ¥é“çš„æ–°è¯­è¨€å’Œåº“ç‰¹æ€§ã€‚ å®ƒå¯èƒ½æ¶µç›–åŸºç¡€åº“ã€ç‰¹å®šæ¨¡å¼æˆ–ç‰¹æ®Šç¯å¢ƒä¸­çš„ç¨‹åºå‘˜çš„å·¥å…·ã€‚
27 å¤šæ€çš„å†…å­˜èµ„æº (PMR) è‡ªC++98ä»¥æ¥ï¼Œæ ‡å‡†åº“å°±æ”¯æŒé…ç½®ç±»åˆ†é…å…¶å†…éƒ¨ï¼ˆå †ï¼‰å†…å­˜çš„æ–¹å¼çš„èƒ½åŠ›ã€‚ç”±äºè¿™ä¸ªåŸå› ï¼Œæ ‡å‡†åº“ä¸­å‡ ä¹æ‰€æœ‰åˆ†é…å†…å­˜çš„ç±»å‹éƒ½æœ‰ä¸€ä¸ªåˆ†é…å™¨å‚æ•°ã€‚å› æ­¤ï¼Œä½ å¯ä»¥é…ç½®å®¹å™¨ã€å­—ç¬¦ä¸²å’Œå…¶ä»–ç±»å‹åˆ†é…å…¶å†…éƒ¨å†…å­˜çš„æ–¹å¼ï¼Œå¦‚æœå®ƒä»¬éœ€è¦æ¯”å †æ ˆä¸Šåˆ†é…çš„ç©ºé—´æ›´å¤šçš„è¯ã€‚ åˆ†é…è¿™ç§å†…å­˜çš„é»˜è®¤æ–¹å¼æ˜¯ä»å †ä¸­åˆ†é…ã€‚ä½†æ˜¯æœ‰ä¸åŒçš„ç†ç”±æ¥ä¿®æ”¹è¿™ä¸ªé»˜è®¤è¡Œä¸ºï¼š
ä½ å¯ä»¥ä½¿ç”¨ä½ è‡ªå·±çš„æ–¹å¼åˆ†é…å†…å­˜ï¼Œä»¥å‡å°‘ç³»ç»Ÿè°ƒç”¨çš„æ•°é‡ã€‚ ä½ å¯ä»¥ç¡®ä¿åˆ†é…çš„å†…å­˜ä½äºå½¼æ­¤çš„æ—è¾¹ï¼Œä»¥ä»CPUç¼“å­˜ä¸­è·ç›Šã€‚ ä½ å¯ä»¥æŠŠå®¹å™¨å’Œå®ƒä»¬çš„å…ƒç´ æ”¾åœ¨å¯ä¾›å¤šè¿›ç¨‹ä½¿ç”¨çš„å…±äº«å†…å­˜ä¸­ã€‚ ä½ ç”šè‡³å¯ä»¥é‡å®šå‘è¿™äº›å †å†…å­˜è°ƒç”¨ï¼Œä»¥ä½¿ç”¨æ—©æœŸåœ¨å †æ ˆä¸Šåˆ†é…çš„å†…å­˜ã€‚å› æ­¤ï¼Œå¯ä»¥æœ‰æ€§èƒ½å’ŒåŠŸèƒ½æ–¹é¢çš„åŸå› ã€‚ ç„¶è€Œï¼Œåœ¨C++17ä¹‹å‰ï¼Œä½¿ç”¨åˆ†é…å™¨ï¼ˆå³ï¼‰åœ¨å¾ˆå¤šæ–¹é¢éƒ½æ˜¯æ—¢æ£˜æ‰‹åˆç¬¨æ‹™çš„ï¼ˆç”±äºä¸€äº›ç¼ºé™·ï¼Œå¤ªè¿‡å¤æ‚ï¼Œä»¥åŠä¸åå‘å…¼å®¹çš„ä¿®æ”¹ï¼‰ã€‚ ç°åœ¨ï¼ŒC++17ä¸ºé¢„å®šä¹‰å’Œç”¨æˆ·å®šä¹‰çš„å†…å­˜åˆ†é…æ–¹å¼æä¾›äº†ä¸€ä¸ªç›¸å½“å®¹æ˜“ä½¿ç”¨çš„æ–¹æ³•ï¼Œå®ƒå¯ä»¥ç”¨äºæ ‡å‡†ç±»å‹å’Œç”¨æˆ·å®šä¹‰çš„ç±»å‹ã€‚ åŸºäºè¿™ä¸ªåŸå› ï¼Œæœ¬ç« å°†è®¨è®ºï¼š
ä½¿ç”¨æ ‡å‡†åº“æä¾›çš„æ ‡å‡†å†…å­˜èµ„æº å®šä¹‰è‡ªå®šä¹‰å†…å­˜èµ„æº ä¸ºè‡ªå®šä¹‰ç±»å‹æä¾›å†…å­˜èµ„æºæ”¯æŒ å¦‚æœæ²¡æœ‰Pablo Halpernã€Arthur O&amp;rsquo;Dwyerã€David Sankelå’ŒJonathan Wakelyçš„å¤§åŠ›å¸®åŠ©ï¼Œæœ¬ç« å°±ä¸å¯èƒ½å®Œæˆã€‚ä¸€äº›è§†é¢‘è§£é‡Šäº†è¿™é‡Œæä¾›çš„åŠŸèƒ½ï¼š
åˆ†é…å™¨ï¼šPablo Halpern çš„å¥½é›¶ä»¶ C++17 çš„ std::pmr æœ‰ä»£ä»· David Sankel åˆ†é…å™¨æ˜¯ Arthur O&amp;rsquo;Dwyer çš„å †å¥æŸ„ 27.1 ä½¿ç”¨æ ‡å‡†å†…å­˜èµ„æº æœ¬èŠ‚ä»‹ç»äº†æ ‡å‡†å†…å­˜èµ„æºä»¥åŠå¦‚ä½•ä½¿ç”¨å®ƒä»¬ã€‚
27.1.1 æ¿€åŠ±æ€§çš„ä¾‹å­ è®©æˆ‘ä»¬é¦–å…ˆæ¯”è¾ƒä¸€ä¸‹æ²¡æœ‰å’Œæœ‰æ ‡å‡†å†…å­˜èµ„æºçš„å†…å­˜æ¶ˆè€—ã€‚
ä¸ºå®¹å™¨å’Œå­—ç¬¦ä¸²åˆ†é…å†…å­˜ å‡è®¾åœ¨ä½ çš„ç¨‹åºä¸­ï¼Œä½ æœ‰ä¸€ä¸ªç”±ä¸€äº›å­—ç¬¦ä¸²ç»„æˆçš„å‘é‡ï¼Œä½ ç”¨ç›¸å½“é•¿çš„æ–¹å¼åˆå§‹åŒ–è¿™äº›å­—ç¬¦ä¸²å­—ç¬¦ä¸²ï¼š
pmr/pmr0.cpp #include &amp;lt;iostream&amp;gt; #include &amp;lt;string&amp;gt; #include &amp;lt;vector&amp;gt; #include &amp;#34;../lang/tracknew.hpp&amp;#34; int main() { TrackNew::reset(); std::vector&amp;lt;std::string&amp;gt; coll; for (int i=0; i &amp;lt; 1000; ++i) { coll.emplace_back(&amp;#34;just a non-SSO string&amp;#34;); } TrackNew::status(); } æ³¨æ„ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªç±»æ¥è·Ÿè¸ªå†…å­˜åˆ†é…çš„æ•°é‡ï¼Œè¯¥ç±»è·Ÿè¸ªæ‰€æœ‰ç”¨ä»¥ä¸‹å¾ªç¯æ‰§è¡Œçš„::newè°ƒç”¨ï¼š</description>
    </item>
    
    <item>
      <title>ç¬¬å››éƒ¨åˆ†-æ ‡å‡†åº“æ‰©å±•å’Œä¿®æ”¹</title>
      <link>https://okokfun.github.io/post/%E7%AC%AC%E5%9B%9B%E9%83%A8%E5%88%86-%E6%A0%87%E5%87%86%E5%BA%93%E6%89%A9%E5%B1%95%E5%92%8C%E4%BF%AE%E6%94%B9/</link>
      <pubDate>Sat, 19 Mar 2022 00:01:15 +0000</pubDate>
      
      <guid>https://okokfun.github.io/post/%E7%AC%AC%E5%9B%9B%E9%83%A8%E5%88%86-%E6%A0%87%E5%87%86%E5%BA%93%E6%89%A9%E5%B1%95%E5%92%8C%E4%BF%AE%E6%94%B9/</guid>
      <description>ç¬¬å››éƒ¨åˆ† æ ‡å‡†åº“æ‰©å±•å’Œä¿®æ”¹ è¿™ä¸€éƒ¨åˆ†ä»‹ç»äº†ç”¨C++17å¯¹ç°æœ‰åº“ç»„ä»¶çš„æ‰©å±•å’Œä¿®æ”¹ã€‚
21ç±»å‹ç‰¹å¾æ‰©å±• å…³äºç±»å‹ç‰¹å¾ï¼ˆæ ‡å‡†ç±»å‹å‡½æ•°ï¼‰ï¼ŒC++17æ‰©å±•äº†ä½¿ç”¨å®ƒä»¬çš„ä¸€èˆ¬èƒ½åŠ›ï¼Œå¹¶ä¸” å¼•å…¥äº†ä¸€äº›æ–°çš„ç±»å‹ç‰¹å¾ã€‚
21.1 ç±»å‹ç‰¹å¾çš„Suffix _v ä»C++17å¼€å§‹ï¼Œä½ å¯ä»¥å¯¹æ‰€æœ‰äº§ç”Ÿæ•°å€¼çš„ç±»å‹ç‰¹å¾ä½¿ç”¨åç¼€_vï¼ˆå› ä¸ºä½ å¯ä»¥å¯¹æ‰€æœ‰äº§ç”Ÿç±»å‹çš„ç±»å‹ç‰¹å¾ä½¿ç”¨åç¼€_tï¼‰ã€‚ä¾‹å¦‚ï¼Œå¯¹äºä»»ä½•ç±»å‹çš„Tï¼Œè€Œä¸æ˜¯
std::is_const&amp;lt;T&amp;gt;::value ä½ ç°åœ¨å¯ä»¥å†™:
std::is_const_v&amp;lt;T&amp;gt; // since C++17 è¿™é€‚ç”¨äºæ‰€æœ‰ç±»å‹ç‰¹å¾ã€‚å…¶æ–¹æ³•æ˜¯ï¼Œä¸ºæ¯ä¸ªæ ‡å‡†ç±»å‹ç‰¹å¾å®šä¹‰ä¸€ä¸ªç›¸åº”çš„ å˜é‡æ¨¡æ¿ã€‚æ¯”å¦‚è¯´:
namespace std { template&amp;lt;typename T&amp;gt; constexpr bool is_const_v = is_const&amp;lt;T&amp;gt;::value; } é€šå¸¸ï¼Œè¿™æœ‰åŠ©äºåˆ¶å®šå¸ƒå°”æ¡ä»¶ï¼Œä½ å¯ä»¥åœ¨è¿è¡Œæ—¶ä½¿ç”¨:
if (std::is_signed_v&amp;lt;char&amp;gt;) { ... } ä½†ç”±äºç±»å‹ç‰¹å¾æ˜¯åœ¨ç¼–è¯‘æ—¶è¯„ä¼°çš„ï¼Œæ‰€ä»¥ä½ å¯ä»¥åœ¨ç¼–è¯‘æ—¶ä½¿ç”¨ç¼–è¯‘æ—¶çš„ç»“æœï¼Œå³compile-time if:
if constexpr (std::is_signed_v&amp;lt;char&amp;gt;) { ... } æˆ–åœ¨å®ä¾‹åŒ–æ¨¡æ¿æ—¶:
// C&amp;lt;T&amp;gt;ç±»çš„ä¸»è¦æ¨¡æ¿ template&amp;lt;typename T, bool = std::is_pointer_v&amp;lt;T&amp;gt;&amp;gt; class C { ... }; // æŒ‡é’ˆç±»å‹çš„éƒ¨åˆ†ç‰¹æ®ŠåŒ–ã€‚ template&amp;lt;typename T&amp;gt; class C&amp;lt;T, true&amp;gt; { ... }; åœ¨è¿™é‡Œï¼Œä»¥Cç±»ä¸ºä¾‹ï¼Œå®ƒä¸ºæŒ‡é’ˆç±»å‹æä¾›äº†ä¸€ä¸ªç‰¹æ®Šçš„å®ç°ã€‚ ä½†æ˜¯å¦‚æœç±»å‹ç‰¹å¾äº§ç”Ÿä¸€ä¸ªéå¸ƒå°”å€¼ï¼Œåç¼€_vä¹Ÿå¯ä»¥ä½¿ç”¨ï¼Œæ¯”å¦‚std::extreme&amp;lt;&amp;gt;ã€‚å®ƒäº§ç”Ÿçš„æ˜¯ä¸€ä¸ªåŸå§‹æ•°ç»„çš„ç»´åº¦å¤§å°:
int a[5][7]; std::cout &amp;lt;&amp;lt; std::extent_v&amp;lt;decltype(a)&amp;gt; &amp;lt;&amp;lt; &amp;#39;\n&amp;#39;; // prints 5 std::cout &amp;lt;&amp;lt; std::extent_v&amp;lt;decltype(a),1&amp;gt; &amp;lt;&amp;lt; &amp;#39;\n&amp;#39;; // prints 7 21.</description>
    </item>
    
    <item>
      <title>ç¬¬äºŒéƒ¨åˆ†-æ¨¡æ¿ç‰¹æ€§</title>
      <link>https://okokfun.github.io/post/%E7%AC%AC%E4%BA%8C%E9%83%A8%E5%88%86-%E6%A8%A1%E6%9D%BF%E7%89%B9%E6%80%A7/</link>
      <pubDate>Sat, 19 Mar 2022 00:01:14 +0000</pubDate>
      
      <guid>https://okokfun.github.io/post/%E7%AC%AC%E4%BA%8C%E9%83%A8%E5%88%86-%E6%A8%A1%E6%9D%BF%E7%89%B9%E6%80%A7/</guid>
      <description>ç¬¬äºŒéƒ¨åˆ†: æ¨¡æ¿ç‰¹æ€§ 9 ç±»æ¨¡æ¿å‚æ•°æ¨å¯¼ C++17ä¹‹å‰ï¼Œä½ å¿…é¡»æ˜¾å¼æŒ‡å®šç±»æ¨¡æ¿çš„æ‰€æœ‰æ¨¡æ¿å‚æ•°ç±»å‹ã€‚æ¯”å¦‚ï¼Œä½ ä¸èƒ½å¿½ç•¥è¿™é‡Œçš„doubleï¼š
std::complex&amp;lt;double&amp;gt; c{5.1,3.3}; ä¹Ÿä¸èƒ½å¿½ç•¥ç¬¬äºŒæ¬¡çš„std::mutexï¼š
std::mutex mx; std::lock_guard&amp;lt;std::mutex&amp;gt; lg(mx); C++17å¼€å§‹ï¼Œå¿…é¡»æ˜¾å¼æŒ‡å®šç±»æ¨¡æ¿çš„æ‰€æœ‰æ¨¡æ¿å‚æ•°ç±»å‹è¿™ä¸ªé™åˆ¶å˜å¾—å®½æ¾äº†ã€‚æœ‰äº†ç±»æ¨¡æ¿å‚æ•°æ¨å¯¼ï¼ˆclass template argument deductionï¼ŒCTADï¼‰æŠ€æœ¯ï¼Œå¦‚æœæ„é€ å‡½æ•°å¯ä»¥æ¨å¯¼å‡ºæ‰€æœ‰æ¨¡æ¿å‚æ•°ï¼Œé‚£ä¹ˆä½ å¯ä»¥è·³è¿‡æ˜¾å¼æŒ‡å®šæ¨¡æ¿å®å‚ã€‚
æ¯”å¦‚ï¼š
ä½ å¯ä»¥è¿™æ ·å£°æ˜ï¼š std::complex c{5.1,3.3}; // å¥½çš„ï¼šæ¨æ–­å‡º std::complex&amp;lt;double&amp;gt; ä½ å¯ä»¥è¿™æ ·å®ç°ï¼š std::mutex mx; std::lock_guard lg{mx}; // OK: æ¨æ–­å‡º std::lock_guard&amp;lt;std_mutex&amp;gt; ä½ ç”šè‡³å¯ä»¥è®©å®¹å™¨æ¨å¯¼å…¶å…ƒç´ çš„ç±»å‹ï¼š std::vector v1 {1, 2, 3} // OK: æ¨æ–­å‡º std::vector&amp;lt;int&amp;gt; std::vector v2 {&amp;#34;hello&amp;#34;, &amp;#34;world&amp;#34;}; // OK: æ¨æ–­å‡º std::vector&amp;lt;const char*&amp;gt; 9.1 ç±»æ¨¡æ¿å‚æ•°æ¨å¯¼çš„ä½¿ç”¨ åªè¦ä¼ ç»™æ„é€ å‡½æ•°çš„å®å‚å¯ä»¥ç”¨æ¥æ¨å¯¼ç±»å‹æ¨¡æ¿å‚æ•°ï¼Œé‚£ä¹ˆå°±å¯ä»¥ä½¿ç”¨ç±»æ¨¡æ¿å‚æ•°æ¨å¯¼æŠ€æœ¯ã€‚è¯¥æŠ€æœ¯æ”¯æŒæ‰€æœ‰åˆå§‹åŒ–æ–¹å¼ï¼š
std::complex c1{1.1, 2.2}; // æ¨æ–­å‡º std::complex&amp;lt;double&amp;gt; std::complex c2(2.2, 3.3); // æ¨æ–­å‡º std::complex&amp;lt;double&amp;gt; std::complex c3 = 3.3; // æ¨æ–­å‡º std::complex&amp;lt;double&amp;gt; std::complex c4 = {4.</description>
    </item>
    
    <item>
      <title>è®©å­—ç¬¦ä¸²åŠå­—ç¬¦æ“ä½œæ›´åŠ å¿«é€Ÿ</title>
      <link>https://okokfun.github.io/post/%E8%AE%A9%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%8F%8A%E5%AD%97%E7%AC%A6%E6%93%8D%E4%BD%9C%E6%9B%B4%E5%8A%A0%E5%BF%AB%E9%80%9F/</link>
      <pubDate>Mon, 07 Feb 2022 17:25:55 +0000</pubDate>
      
      <guid>https://okokfun.github.io/post/%E8%AE%A9%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%8F%8A%E5%AD%97%E7%AC%A6%E6%93%8D%E4%BD%9C%E6%9B%B4%E5%8A%A0%E5%BF%AB%E9%80%9F/</guid>
      <description>è§†é¢‘ç”±upç¥ç»å…ƒçŒ« ç¥ç»å…ƒçŒ«çš„ä¸ªäººç©ºé—´_å“”å“©å“”å“©_bilibili ç¿»è¯‘è‡ª youtube.com/cherno å¹¶å‘å¸ƒåˆ°ğŸ‘‰ ã€80ã€‘ã€Cherno C++ã€‘ã€ä¸­å­—ã€‘å¦‚ä½•è®©C++å­—ç¬¦ä¸²æ›´å¿«_å“”å“©å“”å“©_bilibili å¹¶ç”±æˆ‘æ•´ç†ã€‚
æ­¤æœ¬ä¸ä¼šè®²è§£ä¸ºä»€ä¹ˆstd::stringä¼šå¾ˆæ…¢å’Œå…¶èƒŒåçš„ç»†èŠ‚ï¼Œåªæœ‰äº›ä¾‹å­ã€‚
std::stringçš„ä¸»è¦é—®é¢˜ä¹‹ä¸€æ˜¯ å­—ç¬¦ä¸²æ ¼å¼åŒ–åŠå­—ç¬¦ä¸²æ“ä½œ æ—¶éœ€è¦åˆ†é…å†…å­˜
badä¾‹å­ï¼š
#include &amp;lt;iostream&amp;gt; #include &amp;lt;string&amp;gt; static uint32_t s_AllocCount = 0; // æŸ¥çœ‹åˆ†é…å¤šå°‘æ¬¡å†…å­˜å’Œå¦‚ä½•è·Ÿè¸ªè¿™äº›å†…å­˜ï¼Œéœ€è¦é‡è½½newæ“ä½œç¬¦ void* operator new(size_t size) { s_AllocCount++; std::cout &amp;lt;&amp;lt; &amp;#34;allocating: &amp;#34; &amp;lt;&amp;lt; size &amp;lt;&amp;lt; &amp;#34; bytes\n&amp;#34;; return malloc(size); } void PrintName(const std::string&amp;amp; name) { std::cout &amp;lt;&amp;lt; name &amp;lt;&amp;lt; &amp;#39;\n&amp;#39;; } int main(void) { std::string name = &amp;#34;Yan Chernikov&amp;#34;; std::string firstname = name.substr(0, 3); std::string lasttname = name.</description>
    </item>
    
    <item>
      <title>C&#43;&#43;å•ä¸€å˜é‡å­˜æ”¾å¤šç§ç±»å‹çš„æ•°æ®</title>
      <link>https://okokfun.github.io/post/c-%E5%8D%95%E4%B8%80%E5%8F%98%E9%87%8F%E5%AD%98%E6%94%BE%E5%A4%9A%E7%A7%8D%E7%B1%BB%E5%9E%8B%E7%9A%84%E6%95%B0%E6%8D%AE/</link>
      <pubDate>Sat, 29 Jan 2022 22:33:43 +0000</pubDate>
      
      <guid>https://okokfun.github.io/post/c-%E5%8D%95%E4%B8%80%E5%8F%98%E9%87%8F%E5%AD%98%E6%94%BE%E5%A4%9A%E7%A7%8D%E7%B1%BB%E5%9E%8B%E7%9A%84%E6%95%B0%E6%8D%AE/</guid>
      <description> æ­¤æ–‡æ¥æºäºğŸ‘‰ ã€77ã€‘ã€Cherno C++ã€‘ã€ä¸­å­—ã€‘å•ä¸€å˜é‡å­˜æ”¾å¤šç§ç±»å‹çš„æ•°æ®_å“”å“©å“”å“©_bilibili
ç”¨æ¥å¤„ç†å¯èƒ½å­˜åœ¨ä¹Ÿå¯èƒ½ä¸å­˜åœ¨çš„æ•°æ®ï¼Œä¹Ÿå¯èƒ½æ˜¯ä¸æˆ‘ä»¬é¢„æœŸä¸åŒçš„ç±»å‹ã€‚å½“ç„¶ä¹Ÿä¸ä¸€å®šï¼Œè€Œæ˜¯è®©æˆ‘ä»¬å­˜å‚¨ä¸åŒçš„æ•°æ®ã€‚ std::variantçš„ä½œç”¨æ˜¯è®©æˆ‘ä»¬ä¸ç”¨æ‹…å¿ƒå¤„ç†çš„ç¡®åˆ‡ç±»å‹ï¼ŒæŒ‡å®šä¸€ä¸ªstd::variantçš„ä¸œè¥¿ï¼Œç„¶ååˆ—å‡ºä»–å¯èƒ½çš„æ•°æ®ç±»å‹ã€‚ ä¾‹å­ï¼š
#include &amp;lt;iostream&amp;gt; #include &amp;lt;variant&amp;gt; int main(void) { std::variant&amp;lt;std::string, int&amp;gt; data; data = &amp;#34;Cherno&amp;#34;; std::cout &amp;lt;&amp;lt; std::get&amp;lt;std::string&amp;gt;(data) &amp;lt;&amp;lt; &amp;#39;\n&amp;#39;; data = 2;// dataè¢«é‡æ–°èµ‹å€¼ä¸º2 std::cout &amp;lt;&amp;lt; std::get&amp;lt;int&amp;gt;(data) &amp;lt;&amp;lt; &amp;#39;\n&amp;#39;; data.index();// indexå‡½æ•°ä¼šå‘Šè¯‰ä½ ç±»å‹çš„ç´¢å¼•ï¼Œ æ­¤æ—¶ä¼šæ‰“å°1ã€‚ if (auto value = std::get_if&amp;lt;int&amp;gt;(&amp;amp;data)) { std::string&amp;amp;v = *value; } else { //... } /* std::cout &amp;lt;&amp;lt; std::get&amp;lt;std::string&amp;gt;(data) &amp;lt;&amp;lt; &amp;#39;\n&amp;#39;; é”™è¯¯çš„è®¿é—®æ–¹æ³•ï¼Œåœ¨dataè¢«ç½®ä¸ºintåä¾æ—§æŒ‰ç…§std::stringè®¿é—®ï¼Œä¼šæŠ›å‡ºä¸€ä¸ª bad variant accesså¼‚å¸¸ */ std::cin.get(); return 0; } </description>
    </item>
    
    <item>
      <title>C&#43;&#43;æ•°æ®å­˜åœ¨æˆ–ä¸å­˜åœ¨å¤„ç†æ–¹æ³•</title>
      <link>https://okokfun.github.io/post/c-%E6%95%B0%E6%8D%AE%E5%AD%98%E5%9C%A8%E6%88%96%E4%B8%8D%E5%AD%98%E5%9C%A8%E5%A4%84%E7%90%86%E6%96%B9%E6%B3%95/</link>
      <pubDate>Sat, 29 Jan 2022 21:22:58 +0000</pubDate>
      
      <guid>https://okokfun.github.io/post/c-%E6%95%B0%E6%8D%AE%E5%AD%98%E5%9C%A8%E6%88%96%E4%B8%8D%E5%AD%98%E5%9C%A8%E5%A4%84%E7%90%86%E6%96%B9%E6%B3%95/</guid>
      <description>æ­¤æ–‡æ¥æºäºğŸ‘‰ ã€76ã€‘ã€Cherno C++ã€‘ã€ä¸­å­—ã€‘å¦‚ä½•å¤„ç†OPTIONALæ•°æ®_å“”å“©å“”å“©_bilibili
æœ‰ä¸€ä¸ªè¿”å›çš„å‡½æ•°ï¼Œ æ¯”å¦‚æ­£åœ¨è¯»å–ä¸€ä¸ªæ–‡ä»¶ï¼Œä½†æ˜¯å¦‚æœè¿™ä¸ªæ–‡ä»¶ä¸èƒ½è¢«è¯»å–ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Œè™½ç„¶è¯»å–å¤±è´¥ï¼Œä½†æˆ‘ä»¬ä»ç„¶éœ€è¦ä»å‡½æ•°ä¸­è¿”å›ä¸€äº›ä¸œè¥¿ï¼Œè¿”å›ä¸€ä¸ªç©ºå­—ç¬¦ä¸²æ²¡æœ‰æ„ä¹‰ã€‚
å¦‚æœæ–‡ä»¶æ˜¯ç©ºçš„ï¼Œåº”æœ‰åŠæ³•çœ‹åˆ°æ•°æ®å­˜åœ¨æˆ–ä¸å­˜åœ¨ï¼Œè€Œstd::optionalå¯ä»¥ç»™æˆ‘ä»¬ä¸€äº›å¸®åŠ©ï¼Œæ­¤ç‰¹æ€§åœ¨C++17åŠ å…¥ã€‚
éstd::optionalç‰ˆæœ¬
ä¾‹å­ï¼š
#incldue &amp;lt;iostream&amp;gt; #include &amp;lt;fstream&amp;gt; std::string ReadStringFromFile(const std::&amp;amp;string filepath, bool&amp;amp; outSuccess) { std::ifstream stream(filepath); if (stream) { std::string result; // read file stream.close(); outSuccess = true; return result; } outSuccess = false; return {}; } int main(void) { bool fileOpenedSuccessfully; std::string data = ReadStringFromFile(&amp;#34;data.txt&amp;#34;, fileOpenedSuccessfully); if (fileOpenedSuccessfully) { //... } else { //... } return 0; } std::optionalç‰ˆæœ¬
#include &amp;lt;iostream&amp;gt; #include &amp;lt;fstream&amp;gt; #include &amp;lt;optional&amp;gt; std::optional&amp;lt;std::string&amp;gt; ReadStringFromFile(const std::string&amp;amp; filepath) { std::ifstream stream(filepath); if (stream) { std::string result; // read file stream.</description>
    </item>
    
    <item>
      <title>C&#43;&#43;ç»“æ„åŒ–ç»‘å®š</title>
      <link>https://okokfun.github.io/post/c-%E7%BB%93%E6%9E%84%E5%8C%96%E7%BB%91%E5%AE%9A/</link>
      <pubDate>Sat, 29 Jan 2022 17:40:33 +0000</pubDate>
      
      <guid>https://okokfun.github.io/post/c-%E7%BB%93%E6%9E%84%E5%8C%96%E7%BB%91%E5%AE%9A/</guid>
      <description> æ­¤æ–‡æ€»ç»“ä¸ğŸ‘‰ ç¥ç»å…ƒçŒ«çš„ä¸ªäººç©ºé—´_å“”å“©å“”å“©_bilibili çš„ ã€75ã€‘ã€Cherno C++ã€‘ã€ä¸­å­—ã€‘C++çš„ç»“æ„åŒ–ç»‘å®š_å“”å“©å“”å“©_bilibili
åœ¨å¦‚ä½•å¤„ç†C++å¤šè¿”å›å€¼å¾—é—®é¢˜ï¼Œè¿”å›çš„æ•°æ®å¯ä»¥æ˜¯ç»“æ„ä½“å®ä¾‹ï¼Œä¹Ÿå¯ä»¥æ˜¯å…ƒç»„æˆ–å¯¹ç»„ ä»C++17å¼•å…¥çš„ç»“æ„åŒ–ç»‘å®šå¯ä»¥æ”¹å–„æ­¤é¡¹ï¼Œ
ä»¥å‰å¿’éº»çƒ¦çš„ç‰ˆæœ¬
#include &amp;lt;iostream&amp;gt; #include &amp;lt;string&amp;gt; #include &amp;lt;tuple&amp;gt; std::tuple&amp;lt;std::string, int&amp;gt; CreatPerson() { return { &amp;#34;Cherno&amp;#34;, 24 }; } int main(void) { auto person = CreatPerson(); std::string&amp;amp;name = std::get&amp;lt;0&amp;gt;(person); int age = std::get&amp;lt;1&amp;gt;(person); std::string name; int age; std::tie(name, age) = CreatPerson(); return 0; } ä»C++17å¼•å…¥äº†ç»“æ„åŒ–ç»‘å®šè§£å†³äº†ä¸Šè¯‰é—®é¢˜
#include &amp;lt;iostream&amp;gt; #include &amp;lt;string&amp;gt; #include &amp;lt;tuple&amp;gt; std::tuple&amp;lt;std::string, int&amp;gt; CreatPerson() { return { &amp;#34;Cherno&amp;#34;, 24 }; } int main(void) { auto[name, age] = CreatPerson(); // ç®€å•ï¼Œç¾è§‚ std::cout &amp;lt;&amp;lt; name; return 0; } </description>
    </item>
    
    <item>
      <title>C&#43;&#43;æ–°ç‰¹æ€§</title>
      <link>https://okokfun.github.io/post/c-%E6%96%B0%E7%89%B9%E6%80%A7/</link>
      <pubDate>Mon, 24 Jan 2022 17:02:47 +0000</pubDate>
      
      <guid>https://okokfun.github.io/post/c-%E6%96%B0%E7%89%B9%E6%80%A7/</guid>
      <description>1. Variadic Templates æ•°é‡ä¸å®šçš„æ¨¡æ¿å‚æ•°
...ä»£è¡¨ä»»æ„ä¸ªæ•°æ®
void print(){} template &amp;lt;typename T, typename... Types&amp;gt; void print(const T&amp;amp; firstArg, const Types&amp;amp;...args) { std::cout &amp;lt;&amp;lt; firstArg &amp;lt;&amp;lt; &amp;#39;\n&amp;#39;; print(args...); } void print(const T&amp;amp; firstArg, const Types&amp;amp;...args){}ä¸­...ä»£è¡¨ä»»æ„ä¸ªæ•°æ®ï¼ŒTypesä»»æ„ç±»å‹çš„æ•°æ®,
è¡¨ç¤ºæ¥å—ä»»æ„ä¸ªä»»æ„ç±»å‹çš„æ•°æ®
ä¾‹å­ï¼š
#include &amp;lt;iostream&amp;gt; #include &amp;lt;bitset&amp;gt; void print() {} template &amp;lt;typename T, typename... Types&amp;gt; void print(const T &amp;amp;firstArg, const Types &amp;amp;...args) { std::cout &amp;lt;&amp;lt; firstArg &amp;lt;&amp;lt; &amp;#39;\n&amp;#39;; print(args...); } int main(int argc, char *argv[]) { print(7.5, &amp;#34;hello&amp;#34;, std::bitset&amp;lt;16&amp;gt;(377), 42); return 0; } ç»“æœï¼š</description>
    </item>
    
  </channel>
</rss>
